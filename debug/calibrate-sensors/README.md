1. Get MotionCal from https://www.pjrc.com/store/prop_shield.html
2. Upload this sketch to your smart compass
3. Spin it around all the axis
4. Save the calibration data to the SD card

Mahony requires much less processing power than 